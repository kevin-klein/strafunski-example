<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>EffectTheme</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_EffectTheme.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="source">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">StrategyLib</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Portability</th><td>portable</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Maintainer</th><td>Ralf Laemmel, Joost Visser</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">EffectTheme</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Replace one strategy monad by another
</a></li><li><a href="#g:2">Add an effect to the strategy monad
</a></li><li><a href="#g:3">Remove an effect from the strategy monad 
</a></li><li><a href="#g:4">Localize specific effects
</a><ul><li><a href="#g:5">Localize the partiality effect 
</a></li><li><a href="#g:6">Localize the state effect 
</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module is part of <code>StrategyLib</code>, a library of functional strategy
 combinators, including combinators for generic traversal. This module
 provides combinators to localize monadic effects.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:mrunTP">mrunTP</a> :: (GHC.Base.Monad m, GHC.Base.Monad m', <a href="MonadRun.html#t:MonadRun">MonadRun.MonadRun</a> s m) =&gt; (<span class="keyword">forall</span> a.  s a a) -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m'</li><li class="src short"><a href="#v:mrunTU">mrunTU</a> :: (GHC.Base.Monad m, GHC.Base.Monad m', <a href="MonadRun.html#t:MonadRun">MonadRun.MonadRun</a> s m) =&gt; s a a -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m'</li><li class="src short"><a href="#v:liftTP">liftTP</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, Control.Monad.Trans.Class.MonadTrans t) =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> (t m)</li><li class="src short"><a href="#v:liftTU">liftTU</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, Control.Monad.Trans.Class.MonadTrans t) =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a (t m)</li><li class="src short"><a href="#v:unliftTP">unliftTP</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> s t) =&gt; (<span class="keyword">forall</span> a.  s a a) -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> (t m) -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</li><li class="src short"><a href="#v:unliftTU">unliftTU</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> s t) =&gt; s a a -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a (t m) -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</li><li class="src short"><a href="#v:guaranteeSuccessTP">guaranteeSuccessTP</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> <a href="MonadRun.html#t:MaybeAlg">MonadRun.MaybeAlg</a> t) =&gt; (<span class="keyword">forall</span> a.  a) -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> (t m) -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</li><li class="src short"><a href="#v:guaranteeSuccessTU">guaranteeSuccessTU</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> <a href="MonadRun.html#t:MaybeAlg">MonadRun.MaybeAlg</a> t) =&gt; a -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a (t m) -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</li><li class="src short"><a href="#v:unsafeGuaranteeSuccessTP">unsafeGuaranteeSuccessTP</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> <a href="MonadRun.html#t:MaybeAlg">MonadRun.MaybeAlg</a> t) =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> (t m) -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</li><li class="src short"><a href="#v:localStateTP">localStateTP</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> (<a href="MonadRun.html#t:StateAlg">MonadRun.StateAlg</a> s) t) =&gt; s -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> (t m) -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</li><li class="src short"><a href="#v:localStateTU">localStateTU</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> (<a href="MonadRun.html#t:StateAlg">MonadRun.StateAlg</a> s) t) =&gt; s -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a (t m) -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</li></ul></div><div id="interface"><h1 id="g:1">Replace one strategy monad by another
</h1><div class="top"><p class="src"><a name="v:mrunTP" class="def">mrunTP</a> :: (GHC.Base.Monad m, GHC.Base.Monad m', <a href="MonadRun.html#t:MonadRun">MonadRun.MonadRun</a> s m) =&gt; (<span class="keyword">forall</span> a.  s a a) -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m'</p><div class="doc"><p>Replace the monad in a type-preserving strategy, given a monad
   algebra (see <code><a href="MonadRun.html#t:MonadRun">MonadRun.MonadRun</a></code>) for the monad that is replaced. The two 
   monads are unrelated, so none of the effects in the monad that is
   replaced carry over to the one that replaces it.
</p></div></div><div class="top"><p class="src"><a name="v:mrunTU" class="def">mrunTU</a> :: (GHC.Base.Monad m, GHC.Base.Monad m', <a href="MonadRun.html#t:MonadRun">MonadRun.MonadRun</a> s m) =&gt; s a a -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m'</p><div class="doc"><p>Replace the monad in a type-unifying strategy, given a monad
   algebra (see <code><a href="MonadRun.html#t:MonadRun">MonadRun.MonadRun</a></code>) for the monad that is replaced. The two 
   monads are unrelated, so none of the effects in the monad that is
   replaced carry over to the one that replaces it.
</p></div></div><h1 id="g:2">Add an effect to the strategy monad
</h1><div class="top"><p class="src"><a name="v:liftTP" class="def">liftTP</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, Control.Monad.Trans.Class.MonadTrans t) =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> (t m)</p><div class="doc"><p>Add an effect to the monad in a type-preserving strategy. 
   The monads are related by a monad transformer, so the effects of the
   incoming monad are preserved in the result monad. We use the <code>Control.Monad.Trans.Class.lift</code>
   function of the monad transformer.
</p></div></div><div class="top"><p class="src"><a name="v:liftTU" class="def">liftTU</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, Control.Monad.Trans.Class.MonadTrans t) =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a (t m)</p><div class="doc"><p>Add an effect to the monad in a type-unifying strategy. 
   The monads are related by a monad transformer, so the effects of the
   incoming monad are preserved in the result monad. We use the <code>Control.Monad.Trans.Class.lift</code>
   function of the monad transformer.
</p></div></div><h1 id="g:3">Remove an effect from the strategy monad 
</h1><div class="top"><p class="src"><a name="v:unliftTP" class="def">unliftTP</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> s t) =&gt; (<span class="keyword">forall</span> a.  s a a) -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> (t m) -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</p><div class="doc"><p>remove an effect from the monad of a type-preserving strategy.
   The monads are related by a monad untransformer (see <code><a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a></code>),
   so the effects of the incoming monad are preserved in the result
   monad, except for the effect for which a monad algebra is supplied.
</p></div></div><div class="top"><p class="src"><a name="v:unliftTU" class="def">unliftTU</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> s t) =&gt; s a a -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a (t m) -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</p><div class="doc"><p>remove an effect from the monad of a type-unifying strategy.
   The monads are related by a monad untransformer (see <code><a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a></code>),
   so the effects of the incoming monad are preserved in the result
   monad, except for the effect for which a monad algebra is supplied.
</p></div></div><h1 id="g:4">Localize specific effects
</h1><h2 id="g:5">Localize the partiality effect 
</h2><div class="top"><p class="src"><a name="v:guaranteeSuccessTP" class="def">guaranteeSuccessTP</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> <a href="MonadRun.html#t:MaybeAlg">MonadRun.MaybeAlg</a> t)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (<span class="keyword">forall</span> a.  a)</td><td class="doc"><p>default value (Note: universally quantified!)
</p></td></tr><tr><td class="src">-&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> (t m)</td><td class="doc"><p>type-preserving partial strategy
</p></td></tr><tr><td class="src">-&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</td><td class="doc"><p>type-preserving strategy without partiality
</p></td></tr></table></div><div class="doc"><p>Localize the partiality effect in a type-preserving strategy. A
   default value must be supplied to be used to recover from
   failure. Since this default parameter is universally quantified,
   only <code>GHC.Err.undefined</code> and 'error ...' can be used to instantiate it.
   See also 'unsafeGuaranteeSuccessTP.
</p></div></div><div class="top"><p class="src"><a name="v:guaranteeSuccessTU" class="def">guaranteeSuccessTU</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> <a href="MonadRun.html#t:MaybeAlg">MonadRun.MaybeAlg</a> t)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; a</td><td class="doc"><p>default value
</p></td></tr><tr><td class="src">-&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a (t m)</td><td class="doc"><p>type-preserving partial strategy
</p></td></tr><tr><td class="src">-&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</td><td class="doc"><p>type-preserving strategy without partiality
</p></td></tr></table></div><div class="doc"><p>Localize the partiality effect in a type-unifying strategy. A
   default value must be supplied to be used to recover from
   failure. 
</p></div></div><div class="top"><p class="src"><a name="v:unsafeGuaranteeSuccessTP" class="def">unsafeGuaranteeSuccessTP</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> <a href="MonadRun.html#t:MaybeAlg">MonadRun.MaybeAlg</a> t) =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> (t m) -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</p><div class="doc"><p>Unsafe version of <code><a href="EffectTheme.html#v:guaranteeSuccessTP">EffectTheme.guaranteeSuccessTP</a></code>. This version uses uses <code>GHC.Err.undefined</code>
   to recover from failure. For the type-preserving case, this is the only
   possible default value.
</p></div></div><h2 id="g:6">Localize the state effect 
</h2><div class="top"><p class="src"><a name="v:localStateTP" class="def">localStateTP</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> (<a href="MonadRun.html#t:StateAlg">MonadRun.StateAlg</a> s) t) =&gt; s -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> (t m) -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</p><div class="doc"><p>Localize the state of a type-preserving strategy. The first argument
   represents the initial state.  
</p></div></div><div class="top"><p class="src"><a name="v:localStateTU" class="def">localStateTU</a> :: (GHC.Base.Monad (t m), GHC.Base.Monad m, <a href="MonadRun.html#t:MonadUnTrans">MonadRun.MonadUnTrans</a> (<a href="MonadRun.html#t:StateAlg">MonadRun.StateAlg</a> s) t) =&gt; s -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a (t m) -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</p><div class="doc"><p>Localize the state of a type-unifying strategy. The first argument
   represents the initial state.  
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.11.0</p></div></body></html>