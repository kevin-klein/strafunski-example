<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>TraversalTheme</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_TraversalTheme.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="source">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">StrategyLib</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Portability</th><td>portable</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Maintainer</th><td>Ralf Laemmel, Joost Visser</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">TraversalTheme</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Recursive traversal
</a><ul><li><a href="#g:2">Full traversals
</a></li><li><a href="#g:3">Traversals with stop conditions 
</a></li><li><a href="#g:4">Single hit traversal 
</a></li><li><a href="#g:5">Traversal with environment propagation
</a></li></ul></li><li><a href="#g:6">One-layer traversal
</a><ul><li><a href="#g:7">Defined versions of some primitive one-layer traversal combinators
</a></li><li><a href="#g:8">Recursive completion of one-layer traversal 
</a></li></ul></li><li><a href="#g:9">Overloading and synonyms
</a><ul><li><a href="#g:10">Overloaded schemes for traversal 
</a></li><li><a href="#g:11">Some synonyms for convenience 
</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module is part of <code>StrategyLib</code>, a library of functional strategy
 combinators, including combinators for generic traversal. This module defines
 traversal schemes. Such schemes have formed the core of StrategyLib
 since its first release. The portfolio as it stands now captures part
 of the design in the paper <a href="--- Polymorphic Symphony.html">... Polymorphic Symphony</a>.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:full_tdTP">full_tdTP</a> :: GHC.Base.Monad m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</li><li class="src short"><a href="#v:full_buTP">full_buTP</a> :: GHC.Base.Monad m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</li><li class="src short"><a href="#v:full_tdTU">full_tdTU</a> :: (GHC.Base.Monad m, Data.Monoid.Monoid a) =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</li><li class="src short"><a href="#v:stop_tdTP">stop_tdTP</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</li><li class="src short"><a href="#v:stop_tdTU">stop_tdTU</a> :: (Control.Monad.MonadPlus m, Data.Monoid.Monoid a) =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</li><li class="src short"><a href="#v:once_tdTP">once_tdTP</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</li><li class="src short"><a href="#v:once_tdTU">once_tdTU</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</li><li class="src short"><a href="#v:once_buTP">once_buTP</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</li><li class="src short"><a href="#v:once_buTU">once_buTU</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</li><li class="src short"><a href="#v:once_peTU">once_peTU</a> :: Control.Monad.MonadPlus m =&gt; e -&gt; (e -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> e m) -&gt; (e -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m) -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</li><li class="src short"><a href="#v:anyTP-39-">anyTP'</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</li><li class="src short"><a href="#v:someTP-39-">someTP'</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</li><li class="src short"><a href="#v:all_recTU">all_recTU</a> :: (Data.Monoid.Monoid a, GHC.Base.Monad m) =&gt; (t -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m) -&gt; t -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</li><li class="src short"><a href="#v:one_recTU">one_recTU</a> :: Control.Monad.MonadPlus m =&gt; (t -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m) -&gt; t -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</li><li class="src short"><a href="#v:full_td">full_td</a> :: <a href="OverloadingTheme.html#t:StrategyMonoid">OverloadingTheme.StrategyMonoid</a> s m =&gt; s m -&gt; s m</li><li class="src short"><a href="#v:once_td">once_td</a> :: <a href="OverloadingTheme.html#t:StrategyPlus">OverloadingTheme.StrategyPlus</a> s m =&gt; s m -&gt; s m</li><li class="src short"><a href="#v:once_bu">once_bu</a> :: <a href="OverloadingTheme.html#t:StrategyPlus">OverloadingTheme.StrategyPlus</a> s m =&gt; s m -&gt; s m</li><li class="src short"><a href="#v:once_pe">once_pe</a> :: <a href="OverloadingTheme.html#t:StrategyPlus">OverloadingTheme.StrategyPlus</a> s m =&gt; (e -&gt; s m) -&gt; (e -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> e m) -&gt; e -&gt; s m</li><li class="src short"><a href="#v:topdown">topdown</a> :: GHC.Base.Monad m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</li><li class="src short"><a href="#v:crush">crush</a> :: (GHC.Base.Monad m, Data.Monoid.Monoid u) =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> u m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> u m</li><li class="src short"><a href="#v:collect">collect</a> :: GHC.Base.Monad m =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> [a] m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> [a] m</li><li class="src short"><a href="#v:select">select</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> u m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> u m</li><li class="src short"><a href="#v:selectenv">selectenv</a> :: Control.Monad.MonadPlus m =&gt; e -&gt; (e -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> e m) -&gt; (e -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m) -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</li></ul></div><div id="interface"><h1 id="g:1">Recursive traversal
</h1><h2 id="g:2">Full traversals
</h2><div class="top"><p class="src"><a name="v:full_tdTP" class="def">full_tdTP</a> :: GHC.Base.Monad m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</p><div class="doc"><p>Full type-preserving traversal in top-down order.
</p></div></div><div class="top"><p class="src"><a name="v:full_buTP" class="def">full_buTP</a> :: GHC.Base.Monad m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</p><div class="doc"><p>Full type-preserving traversal in bottom-up order.
</p></div></div><div class="top"><p class="src"><a name="v:full_tdTU" class="def">full_tdTU</a> :: (GHC.Base.Monad m, Data.Monoid.Monoid a) =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</p><div class="doc"><p>Full type-unifying traversal in top-down order.
</p></div></div><h2 id="g:3">Traversals with stop conditions 
</h2><div class="top"><p class="src"><a name="v:stop_tdTP" class="def">stop_tdTP</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</p><div class="doc"><p>Top-down type-preserving traversal that is cut of below nodes
   where the argument strategy succeeds.
</p></div></div><div class="top"><p class="src"><a name="v:stop_tdTU" class="def">stop_tdTU</a> :: (Control.Monad.MonadPlus m, Data.Monoid.Monoid a) =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</p><div class="doc"><p>Top-down type-unifying traversal that is cut of below nodes
   where the argument strategy succeeds.
</p></div></div><h2 id="g:4">Single hit traversal 
</h2><div class="top"><p class="src"><a name="v:once_tdTP" class="def">once_tdTP</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</p><div class="doc"><p>Top-down type-preserving traversal that performs its argument
   strategy at most once.
</p></div></div><div class="top"><p class="src"><a name="v:once_tdTU" class="def">once_tdTU</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</p><div class="doc"><p>Top-down type-unifying traversal that performs its argument
   strategy at most once.
</p></div></div><div class="top"><p class="src"><a name="v:once_buTP" class="def">once_buTP</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</p><div class="doc"><p>Bottom-up type-preserving traversal that performs its argument
   strategy at most once.
</p></div></div><div class="top"><p class="src"><a name="v:once_buTU" class="def">once_buTU</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</p><div class="doc"><p>Bottom-up type-unifying traversal that performs its argument
   strategy at most once.
</p></div></div><h2 id="g:5">Traversal with environment propagation
</h2><div class="top"><p class="src"><a name="v:once_peTU" class="def">once_peTU</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Control.Monad.MonadPlus m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; e</td><td class="doc"><p>initial environment
</p></td></tr><tr><td class="src">-&gt; (e -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> e m)</td><td class="doc"><p>environment modification at downward step
</p></td></tr><tr><td class="src">-&gt; (e -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m)</td><td class="doc"><p>extraction of value, dependent on environment
</p></td></tr><tr><td class="src">-&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Top-down type-unifying traversal with propagation of an environment.
</p></div></div><h1 id="g:6">One-layer traversal
</h1><h2 id="g:7">Defined versions of some primitive one-layer traversal combinators
</h2><div class="top"><p class="src"><a name="v:anyTP-39-" class="def">anyTP'</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</p><div class="doc"><p>Use <code><a href="StrategyPrimitives.html#v:anyTP">StrategyPrimitives.anyTP</a></code> instead.
</p></div></div><div class="top"><p class="src"><a name="v:someTP-39-" class="def">someTP'</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</p><div class="doc"><p>Use <code><a href="StrategyPrimitives.html#v:someTP">StrategyPrimitives.someTP</a></code> instead.
</p></div></div><h2 id="g:8">Recursive completion of one-layer traversal 
</h2><div class="top"><p class="src"><a name="v:all_recTU" class="def">all_recTU</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (Data.Monoid.Monoid a, GHC.Base.Monad m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (t -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m)</td><td class="doc"><p>binary strategy combinator
</p></td></tr><tr><td class="src">-&gt; t</td><td class="doc"><p>argument strategy
</p></td></tr><tr><td class="src">-&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</td><td class="doc"><p>result strategy
</p></td></tr></table></div><div class="doc"><p>Recursive completion of full type-preserving one-layer traverasal
</p></div></div><div class="top"><p class="src"><a name="v:one_recTU" class="def">one_recTU</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Control.Monad.MonadPlus m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (t -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m)</td><td class="doc"><p>binary strategy combinator
</p></td></tr><tr><td class="src">-&gt; t</td><td class="doc"><p>argument strategy
</p></td></tr><tr><td class="src">-&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</td><td class="doc"><p>result strategy
</p></td></tr></table></div><div class="doc"><p>Recursive completion of type-preserving one-layer traversal that
   succeeds exactly once.
</p></div></div><h1 id="g:9">Overloading and synonyms
</h1><h2 id="g:10">Overloaded schemes for traversal 
</h2><div class="top"><p class="src"><a name="v:full_td" class="def">full_td</a> :: <a href="OverloadingTheme.html#t:StrategyMonoid">OverloadingTheme.StrategyMonoid</a> s m =&gt; s m -&gt; s m</p><div class="doc"><p>Full top-down traversal (overloaded between <code><a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a></code> and <code><a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a></code>).
</p></div></div><div class="top"><p class="src"><a name="v:once_td" class="def">once_td</a> :: <a href="OverloadingTheme.html#t:StrategyPlus">OverloadingTheme.StrategyPlus</a> s m =&gt; s m -&gt; s m</p><div class="doc"><p>One-hit top-down traversal (overloaded between <code><a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a></code> and <code><a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a></code>).
</p></div></div><div class="top"><p class="src"><a name="v:once_bu" class="def">once_bu</a> :: <a href="OverloadingTheme.html#t:StrategyPlus">OverloadingTheme.StrategyPlus</a> s m =&gt; s m -&gt; s m</p><div class="doc"><p>One-hit bottom-up traversal (overloaded between <code><a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a></code> and <code><a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a></code>).
</p></div></div><div class="top"><p class="src"><a name="v:once_pe" class="def">once_pe</a> :: <a href="OverloadingTheme.html#t:StrategyPlus">OverloadingTheme.StrategyPlus</a> s m =&gt; (e -&gt; s m) -&gt; (e -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> e m) -&gt; e -&gt; s m</p><div class="doc"><p>One-hit top-down traversal with environment propagation 
   (overloaded between <code><a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a></code> and <code><a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a></code>).
</p></div></div><h2 id="g:11">Some synonyms for convenience 
</h2><div class="top"><p class="src"><a name="v:topdown" class="def">topdown</a> :: GHC.Base.Monad m =&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m -&gt; <a href="StrategyPrimitives.html#t:TP">StrategyPrimitives.TP</a> m</p><div class="doc"><p>See <code><a href="TraversalTheme.html#v:full_tdTP">TraversalTheme.full_tdTP</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:crush" class="def">crush</a> :: (GHC.Base.Monad m, Data.Monoid.Monoid u) =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> u m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> u m</p><div class="doc"><p>See <code><a href="TraversalTheme.html#v:full_tdTU">TraversalTheme.full_tdTU</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:collect" class="def">collect</a> :: GHC.Base.Monad m =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> [a] m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> [a] m</p><div class="doc"><p>Type-specialised version of <code><a href="TraversalTheme.html#v:crush">TraversalTheme.crush</a></code>, which works with lists instead of
   any arbitrary monoid.
</p></div></div><div class="top"><p class="src"><a name="v:select" class="def">select</a> :: Control.Monad.MonadPlus m =&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> u m -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> u m</p><div class="doc"><p>See <code><a href="TraversalTheme.html#v:once_tdTU">TraversalTheme.once_tdTU</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:selectenv" class="def">selectenv</a> :: Control.Monad.MonadPlus m =&gt; e -&gt; (e -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> e m) -&gt; (e -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m) -&gt; <a href="StrategyPrimitives.html#t:TU">StrategyPrimitives.TU</a> a m</p><div class="doc"><p>See <code><a href="TraversalTheme.html#v:once_peTU">TraversalTheme.once_peTU</a></code>.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.11.0</p></div></body></html>